- name: Create font dirs
  ansible.builtin.shell:
  cmd: mkdir -p /home/alikebrahim/.local/share/fonts/{JuliaMono,JetBrains}

- name: Install JuliaMono font
  ansible.builtin.uri:
  url: 'https://github.com/cormullion/juliamono/releases/download/v0.056/JuliaMono-ttf.tar.gz'
  dest: "{{ ansible_env.HOME }}/.local/share/fonts/JuliaMono"

- name: Extract JuliaMono
  ansible.builtin.shell:
  cmd: tar xvf JuliaMono-ttf.tar.gz
  chdir: "{{ ansible_env.HOME }}/.local/share/fonts/JuliaMono"

- name: Install JetBrains font
  ansible.builtin.uri:
  url: 'https://download.jetbrains.com/fonts/JetBrainsMono-2.304.zip'
  dest: "{{ ansible_env.HOME }}/.local/share/fonts/JuliaMono"

- name: Extract JetBrains
  ansible.builtin.shell:
  cmd: unzip JetBrainsMono-2.304.zip .
  chdir: "{{ ansible_env.HOME }}/.local/share/fonts/JetBrains"

- name: Config Stow
  ansible.builtin.command:
    cmd: stow zsh nvm fzf tmux wezterm obsidian atuin
    chdir: "{{ ansible_env.HOME }}/.dotfiles"

- name: Config Stow
  ansible.builtin.command:
    cmd: stow zsh nvm fzf tmux wezterm obsidian atuin
    chdir: "{{ ansible_env.HOME }}/.dotfiles"

- name: Set zsh shell
  ansible.builtin.command:
    cmd: chsh -a $(which zsh)
- name: Checking if oh-my-zsh exists
  stat:
    path: /home/alikebrahim/.oh-my-zsh
  register: oh_my_stats

- name: Oh-My-Zsh
  ansible.bultin.shell: sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended --keep-zshrc
  when: oh_my_stats.stat.exists == False
  become_user: alikebrahim

- name: Install zsh-syntax-highlightinh
  ansible.builtin.git:
    repo: 'https://github.com/zsh-users/zsh-syntax-highlighting.git'
    dest: "/home/alikebrahim/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting"

- name: Install zsh-autosuggestions
  ansible.builtin.git:
    repo: 'https://github.com/zsh-users/zsh-autosuggestions.git'
    dest: "/home/alikebrahim/.oh-my-zsh/custom/plugins/zsh-autosuggestions"

- name: Set wezterm as default terminal
  ansible.builtin.command:
    cmd: update-alternatives --set x-terminal-emulator /usr/bin/open-wezterm-here

- name: Update tldr database
  ansible.builtin.command:
    cmd: tldr -u

- name: Update font cache
  ansible.builtin.command:
    cmd: fc-cache -r
