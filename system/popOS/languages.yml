# go
- name: Get Go Latest Version
  ansible.builtin.shell: 
    cmd: curl -Ls "https://golang.org/dl/?mode=json" | jq -r '.[0].version'
  register: go_version

- name: Download Go Tarball
  ansible.builtin.get_url:
    url: https://go.dev/dl/{{ go_version.stdout }}.linux-amd64.tar.gz
    dest: /tmp/{{ go_version.stdout }}.linux-amd64.tar.gz

- name: Install Go
  ansible.builtin.shell: 
    cmd: rm -rf /usr/local/go && tar -C /usr/local -xzf /tmp/{{ go_version.stdout }}.linux-amd64.tar.gz
  become: true

- name: Create Go Dir
  ansible.builtin.shell: 
    cmd: mkdir -p /home/alikebrahim/go/{src,pkg,bin}
  become_user: alikebrahim 
# rust
- name: Download Rust Installer
  ansible.builtin.get_url:
    url: https://sh.rustup.rs
    dest: /tmp/rustup.sh
    mode: '0755'

- name: Install Rust
  ansible.builtin.shell: sh /tmp/rustup.sh -y
  args:
    creates: /home/alikebrahim/.cargo/bin/rustc
  become_user: alikebrahim
  #
# Update Shell Profile
- name: Update shell profile with Go and Rust paths
  ansible.builtin.lineinfile:
    path: /home/alikebrahim/.profile
    line: |
      export PATH=$PATH:/usr/local/go/bin:/home/alikebrahim/.cargo/bin
    state: present

- name: Source the updated profile
  ansible.builtin.shell: |
    source /home/alikebrahim/.profile
  become_user: alikebrahim
# node
# java
